# 쇼핑몰 데이터 RFM 분석

## 프로젝트 개요
쇼핑몰 고객 타켓 마케팅 전략 수립 이전 쇼핑몰 고객 데이터를 바탕으로 고객의 구매 행동을 평가하여 고객 가치를 분석한다.

이를 통해 충성 고객, 이탈 가능 고객, 신규 고객 등으로 고객을 분류하고 마케팅 전략 수립을 효율적으로 할 수 있다.

## RFM 분석
> 고객의 구매 행동을 바탕으로 고객 가치를 평가하고, 타켓(고객) 마케팅 전략 수립을 위한 정보를 수집하는 기법

1. Recency (최근성)
    - 고객이 마지막으로 구매한 시점에서부터 현재까지의 시간
    - 최근에 구매한 고객일수록 관심도가 높다고 해석한다.

2. Frequency (빈도)
    - 특정 기간 동안 고객인 구매한 빈도
    - 자주 구매한 고객일수록 관심도가 높다고 해석한다.ㄴ

3. Monetary (금액)
    - 특정 기간 동안 고객인 지출한 총 금액
    - 많은 금액을 지출한 고객일수록 중요한 고객으로 해석한다.

4. 예시
    - A 고객 
        - 최근 구매일 : 1년 전
        - 구매 횟수 : 10번
        - 총 구매 금액 : 100만원
    
    - B 고객
        - 최근 구매일 : 1개월 전
        - 구매 횟수 : 1번
        - 총 구매 금액 : 5만원

    - 해석
        - A 고객은 과거에는 충성도가 높았지만 현재는 이탈 가능성이 있으므로 재방문을 유도하기 위한 전략 필요
        - 신규 고객인 B 고객 대상으로는 지속적인 방문 및 구매를 유도하기 위한 전략 필요


## 프로젝트 목표
1. 데이터를 확인하고, 특성을 이해한다.
2. 데이터의 이상치 & 결측치를 확인하고 적절한 방법으로 처리한다.
3. 쇼핑몰 고객 구매 데이터 기반 RFM 분석을 수행한다.
4. RFM 분석 기반 사용자 그룹 분류
    - 그룹의 기준은 분석 결과를 보고 각자 정한다.
    - 예시
        - 5(R)5(F)5(M) : 고가치 고객
        - 1(R)3(F)3(M) : 이탈 가능 고객
        - 5(R)1(F)1(M) : 신규 고객
5. 분석 결과를 시각화하여 직관적으로 전달한다.


## 프로젝트 제약
- 데이터 처리 및 분석을 할 때 현재 날짜를 `2022-12-1`로 가정한다.
- 검색 및 ChatGPT 활용을 허용한다.
    - 단, ChatGPT에게 직접적인 질문은 하지 않는다.
- RFM 각 점수 기준은 아래와 같다. 
    - 점수는 5가 가장 크고 1이 가장 작다.
    - R(Recency)
        - 5 : 최근 구매일 30일 이하
        - 4 : 최근 구매일 3개월 이하
        - 3 : 최근 구매일 6개월 이하
        - 2 : 최근 구매일 1년 이하
        - 1 : 최근 구매일 1년 초과
    - F(Frequency)
        - 5 : 총 구매 횟수 상위 10% 
        - 4 : 총 구매 횟수 상위 30% 
        - 3 : 총 구매 횟수 상위 50% 
        - 2 : 총 구매 횟수 상위 70% 
        - 1 : 총 구매 횟수 상위 100% 
    - M(Monetary)
        - 5 : 총 구매 금액 상위 10% 
        - 4 : 총 구매 금액 상위 30% 
        - 3 : 총 구매 금액 상위 50% 
        - 2 : 총 구매 금액 상위 70% 
        - 1 : 총 구매 금액 상위 100% 


## 프로젝트 필수 사항
### 데이터 확인
- 데이터에 통계 기법(평균, 중앙값 등)을 적용해 데이터의 특성을 이해한다.

### 이상치 및 결측치 확인 및 처리
- 데이터의 이상치 및 결측치를 확인한다.
- 적절한 방법으로 이상치 및 결측치를 처리한다.

### 데이터 분석
- 파일 이름 : `analysis.ipynb` 
- 구매자를 기준으로 RFM 분석 결과 추출한다.
- 새로운 데이터프레임을 생성하고, 아래 데이터로 구성한다.
    - 구매자 (그룹화 기준)
    - recency (최근 구매일)
    - frequency (총 구매 횟수)
    - monetary (총 구매 금액)
    - R_score (Recency 점수 1 ~ 5)
    - F_score (Frequency 점수 1 ~ 5)
    - M_score (Monetary 점수 1 ~ 5)
    - grade (RFM 점수를 기준으로 분류한 5개 그룹 중 하나)
- 새로운 데이터프레임은 `RFM_result.csv` 이름으로 추출한다.

### 데이터 시각화
- 파일 이름 : `visualization.ipynb`
- 월별, 연도별 매출 시각화
- 판매 금액 TOP3 상품에 대한 구매자 분포도 시각화
- RFM 점수 최고 구매자의 구매 물품 분포도 시각화
- 기타 추가 시각화


## 필수 활용 함수
### `pd.qcut()`
> 데이터를 균등한 비율로 구간을 나누어 주는 함수
> 
> 예를 들어, 데이터 시리즈에 대해 상위 10%, 상위 30% 기준으로 데이터 분류 라벨을 생성할 수 있다.

- 기본 사용법
    ```python
    pd.qcut(x, q, labels)
    ```

    - x: 구간을 나눌 데이터 배열 또는 시리즈
    - q: 나눌 구간의 수 또는 구간을 나눌 백분위수 목록
    - labels: 각 구간에 부여할 라벨 (기본값은 None)

- 예시 코드
    ```python
    # 1부터 10까지 수를 상위 10%와 하위 90%로 분류 
    import pandas as pd

    data = pd.Series(range(1, 11))
    df = pd.DataFrame(data, columns=["value"])


    df["quantile"] = pd.qcut(
        df["value"],
        q=[0, 0.9, 1.0],
        labels=["하위 90%", "상위 10%"],
    )
    print(df)
    ```
    ```bash
    # 결과
       value       quantile
    0      1  (0.999, 3.25]
    1      2  (0.999, 3.25]
    2      3  (0.999, 3.25]
    3      4    (3.25, 5.5]
    4      5    (3.25, 5.5]
    5      6    (5.5, 7.75]
    6      7    (5.5, 7.75]
    7      8   (7.75, 10.0]
    8      9   (7.75, 10.0]
    9     10   (7.75, 10.0]
    ```

    ```python
    # 1부터 10까지 수를 분류
    # 상위 10% - 3, 상위 30% - 2, 하위 70% - 1
    import pandas as pd

    data = pd.Series(range(1, 11))
    df = pd.DataFrame(data, columns=["value"])

    df["quantile"] = pd.qcut(
        df["value"],
        q=[0, 0.7, 0.9, 1.0],
        labels=["1", "2", "3"],
    )
    print(df)
    ```
    ```bash
    # 결과
        value quantile
    0      1        1
    1      2        1
    2      3        1
    3      4        1
    4      5        1
    5      6        1
    6      7        1
    7      8        2
    8      9        2
    9     10        3
    ```



## 제출
- 제출 이메일 : beemo@nodecrew.kr
- 제출 파일
    - 데이터 RFM 분석 코드 `analysis.ipynb`
    - 데이터 시각화 코드 `visualization.ipynb`
    - RFM 분석 결과 추출 파일 `RFM_result.csv`
